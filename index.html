<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç Firebase</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Page: Home -->
    <div id="page-home" class="page">
        <div class="container">
            <h1>‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç</h1>
            <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏´‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</p>
            <input type="text" id="input-player-name" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
            <button id="btn-go-to-pre-lobby" class="btn btn-primary">‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button>
        </div>
    </div>

    <!-- Page: Pre-Lobby -->
    <div id="page-pre-lobby" class="page" style="display: none;">
        <div class="container">
            <h2>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö, <span id="pre-lobby-player-name"></span></h2>
            <p>‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£?</p>
            <div class="pre-lobby-buttons">
                <button id="btn-go-to-create" class="btn btn-success btn-large">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á</button>
                <button id="btn-go-to-join" class="btn btn-primary btn-large">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏´‡πâ‡∏≠‡∏á</button>
            </div>
        </div>
    </div>

    <!-- Page: Lobby (Create Room) -->
    <div id="page-lobby-create" class="page" style="display: none;">
        <div class="container">
            <h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</h2>
            <div class="card">
                <input type="text" id="input-room-name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á (‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)">
                <div class="config-grid">
                    <label>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: <input type="number" id="input-max-players" value="4" min="2" max="6"></label>
                    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏•‡∏Ç: <input type="number" id="input-digit-count" value="4" min="3" max="6"></label>
                    <label>‡πÄ‡∏ß‡∏•‡∏≤/‡∏ï‡∏≤ (‡∏ß‡∏¥): <input type="number" id="input-turn-time" value="30" min="10" max="90"></label>
                </div>
                <button id="btn-create-room" class="btn btn-success">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á</button>
                <button class="btn btn-secondary" onclick="navigateTo('pre-lobby')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
            </div>
        </div>
    </div>

    <!-- Page: Lobby (Join Room) -->
    <div id="page-lobby-join" class="page" style="display: none;">
        <div class="container">
            <h2>‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏´‡πâ‡∏≠‡∏á</h2>
            <div class="card">
                <div id="room-list-container">
                    <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏´‡πâ‡∏≠‡∏á...</p>
                </div>
                <button class="btn btn-secondary" onclick="navigateTo('pre-lobby')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
            </div>
        </div>
    </div>

    <!-- Page: Game -->
    <div id="page-game" class="page" style="display: none;">
        <div class="container">
            <div class="game-header">
                <h2 id="game-room-name">‡∏´‡πâ‡∏≠‡∏á: ...</h2>
                <div class="game-header-buttons">
                    <button id="history-toggle-btn" class="header-icon-btn">üìú</button>
                    <button id="chat-toggle-btn" class="header-icon-btn">üí¨<span id="chat-unread-indicator" style="display: none;"></span></button>
                </div>
            </div>
            
            <div id="setup-section">
                <p>‡∏Å‡∏î "‡∏û‡∏£‡πâ‡∏≠‡∏°" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô</p>
                <button id="btn-ready-up" class="btn btn-primary">‡∏û‡∏£‡πâ‡∏≠‡∏°!</button>
            </div>

            <div id="waiting-section" style="display: none;">
                <h3>‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!</h3>
                <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°...</p>
                <div class="loader"></div>
            </div>

            <div id="gameplay-section" style="display: none;">
                <div id="my-secret-number-display">‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span>- - - -</span></div>
                <div id="player-list"></div>
                <div class="game-status">
                    <div id="timer-indicator">30</div>
                    <div id="target-indicator">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ...</div>
                    <div id="turn-indicator">‡∏ú‡∏π‡πâ‡∏ó‡∏≤‡∏¢: ...</div>
                </div>
                <div id="game-display"></div>
                <div class="keypad">
                    <button class="key">1</button> <button class="key">2</button> <button class="key">3</button>
                    <button class="key">4</button> <button class="key">5</button> <button class="key">6</button>
                    <button class="key">7</button> <button class="key">8</button> <button class="key">9</button>
                    <button class="key" id="btn-delete">‡∏•‡∏ö</button> <button class="key">0</button> <button class="key btn-guess" id="btn-guess">‡∏ó‡∏≤‡∏¢</button>
                </div>
            </div>

            <button id="btn-leave-room" class="btn btn-danger">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏≠‡∏á</button>
        </div>
        
        <!-- Modals are now INSIDE the game page -->
        <div id="history-modal-overlay" class="modal-overlay" style="display: none;">
            <div id="history-modal" class="modal-content">
                <div class="modal-header"><h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3><button id="history-close-btn" class="modal-close-btn">&times;</button></div>
                <div id="history-modal-body"></div>
            </div>
        </div>
        <div id="chat-modal-overlay" class="modal-overlay" style="display: none;">
            <div id="chat-modal" class="modal-content">
                <div class="modal-header"><h3>‡πÅ‡∏ä‡∏ó‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á</h3><button id="chat-close-btn" class="modal-close-btn">&times;</button></div>
                <div id="chat-modal-body"></div>
                <div id="chat-modal-footer"><input type="text" id="chat-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..."><button id="chat-send-btn">‡∏™‡πà‡∏á</button></div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="script.js"></script>
</body>
</html>
